<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <title>校园工具网 - 信息存储测试</title>
  <!-- 必须！引入 LeanCloud SDK -->
  <script src="https://cdn.jsdelivr.net/npm/leancloud-storage@4.12.0/dist/av-min.js"></script>
</head>
<body>
  <h1>测试用户信息存储</h1>

  <!-- 最简表单：填昵称、头像、班级 -->
  <input type="text" id="nickname" placeholder="昵称"><br><br>
  <input type="text" id="avatar" placeholder="头像链接（如 https://xxx.png）"><br><br>
  <input type="text" id="userClass" placeholder="班级（如 高一(1)班）"><br><br>
  <button onclick="saveToLeanCloud()">保存到 LeanCloud</button>

  <!-- 核心 JS：初始化 SDK + 存储逻辑 -->
  <script>
    // 1. 初始化 LeanCloud（替换为你的密钥）
    AV.init({
      appId: "0q5QrQ2pGsms6GN3cUn3Xx7f-gzGzoHsz", 
      appKey: "m7saMie87OiJizfHwzhcQaEc", 
      serverURL: "https://0q5qrq2p.lc-cn-n1-shared.com" 
    });

    // 2. 点击按钮时，把输入的信息存到 UserProfile 类
    async function saveToLeanCloud() {
      // 获取输入框的值
      const nickname = document.getElementById('nickname').value;
      const avatar = document.getElementById('avatar').value;
      const userClass = document.getElementById('userClass').value;

      try {
        // 创建 UserProfile 实例（关联你在 LeanCloud 建的类）
        const UserProfile = AV.Object.extend('UserProfile');
        const profile = new UserProfile();

        // 设置字段（对应你在控制台加的字段）
        profile.set('nickname', nickname);
        profile.set('avatarUrl', avatar);
        profile.set('class', userClass);
        // 其他字段（isAdmin 等）可以后续注册时再处理，这里先存基础信息

        // 保存到 LeanCloud
        await profile.save();
        alert('保存成功！去 LeanCloud 控制台看看吧～');
      } catch (error) {
        alert('保存失败：' + error.message);
      }
    }
  </script>
</body>
</html>
